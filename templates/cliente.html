<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="../styles/style.css">
    <title>Sistema de control domÃ©stico</title>
</head>

<body>
    <div class="wrapper">
        <h1>Sistema de control domÃ©stico</h1>
        <div class="cards">
            <div class="card">
                <h2>Sensores</h2>
                <div class="temp">
                    <h4><span class="emoji">ğŸŒ¡ï¸</span> Temperatura: <span id="temp-holder">No hay valor</span></h4>
                </div>
                <div class="lux">
                    <h4><span class="emoji">ğŸ’¡</span> Luminosidad: <span id="lux-holder">No hay valor</span></h4>
                </div>
            </div>
            <div class="card">
                <h2>Control</h2>
                <div class="temp">
                    <h4><span class="emoji">ğŸŒ¡ï¸</span> Aire acondicionado: <span id="ac-status">Apagado  ğŸ”´</span></h4>
                </div>
                <div class="lux">
                    <h4><span class="emoji">ğŸ’¡</span> Persiana: <span id="lux-status">Cerrada  ğŸ”´</span></h4>
                </div>
            </div>
        </div>
        <a class="button" target="_blank" href="/">Nuevo cliente</a>
        <a class="button" target="_blank" href="templates/sensores.html">Formulario sensores</a>
        <div id="resultados"></div>
    </div>
</body>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
    var socket = io();

    socket.on('updateTmp', (updatedTmp) => {
        var tmpField = document.getElementById("temp-holder");
        tmpField.textContent = updatedTmp.value + ' Âº C';
    });

    socket.on('updateLux', (updatedLux) => {
        var luxField = document.getElementById("lux-holder");
        luxField.textContent = updatedLux.value + ' lux';
    });

    socket.on('acOn', () => {
        var tmpField = document.getElementById("ac-status");
        tmpField.textContent = 'Encendido  ğŸŸ¢';
    });

    socket.on('acOff', () => {
        var tmpField = document.getElementById("ac-status");
        tmpField.textContent = 'Apagado  ğŸ”´';
    });

    socket.on('openWindow', () => {
        var tmpField = document.getElementById("lux-status");
        tmpField.textContent = 'Abierta  ğŸªŸ';
    });

    socket.on('closeWindow', () => {
        var tmpField = document.getElementById("lux-status");
        tmpField.textContent = 'Cerrada  ğŸ”’';
    });
</script>

</html>